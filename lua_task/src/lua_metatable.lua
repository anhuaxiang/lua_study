---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/10/25 16:26
---


local a = {}
function a.show_info()
    print("a.show_info method~")
end
local b = {}
setmetatable(b, {__index = a})
b.show_info()


--mytable = setmetatable(
--    {key1="value"},
--    {__index=function(mytable, key)
--        if key == "key2" then
--            return "metatable value2"
--        else
--            return nil
--        end
--    end}
--)
--print(mytable.key1, mytable.key2, mytable.key3)
---上述代码相当于   setmetatable(mytable, {__index={key2="metatable value2"}}



--my_metatable = {}
--my_table = setmetatable({key1="value1"}, {__newindex=my_metatable})
--
--my_table.new_key = "newvalue"
--print(my_table.new_key, my_metatable.new_key)
--
--my_table.key1 = "newnew"
--print(my_table.key1, my_metatable.key1)



--mytable = setmetatable({key1 = "value1"}, {
--    __newindex = function(mytable, key, value)
--        rawset(mytable, key, tostring(value))
--    end
--})
--mytable.key1 = "new value"
--mytable.key2 = 4
--print(mytable.key1,mytable.key2)



--function table_maxn(t)
--    local mn = 0
--    for k, v in pairs(t) do
--        if k > mn then
--            mn = k
--        end
--    end
--    return mn
--end
--my_table = setmetatable({1, 2, 3}, {
--    __add=function(my_table, new_table)
--        for i=1, table_maxn(new_table) do
--            table.insert(my_table, table_maxn(my_table)+1, new_table[i])
--        end
--        return my_table
--    end
--})
--new_table = {5, 6, 7}
--x = my_table + new_table
--for k, v in pairs(x) do
--    print(k, v)
--end


a = {1, 2, 3, 4}
setmetatable(a, {
    __tostring=function(my_table)
        s = ""
        for k, v in pairs(my_table) do
            s = s .. k .. ":" .. v .. ", "
        end
        return string.sub(s, 1, -3)  --- 或者 （s， 1， #s-2）
    end
})

print(a)